== Ручная настройка прокси

Этот раздел необходим только в том случае, если вы хотите использовать Burp или запуск браузера через ZAP не работает в обоих случаях

нам нужно выполнить дополнительную настройку.
В последней версии Chrome и Firefox больше не проксируют трафик с localhost по умолчанию.

=== Вариант 1: изменение настроек браузера

- Для проксирования localhost (и связанных адресов) с более новыми версиями Firefox (>= 67) параметр network. proxy.allow_hijacking_localhost (доступный через страницу about:config) должен быть установлен в значение true.
- Для проксирования localhost (и связанных адресов) с более новыми версиями Chrome (>= 72) необходимо указать аргумент командной строки --proxy-bypass-list=<-loopback>.

=== Вариант 2: использование www.webgoat.local

- Используйте имя хоста вашей машины вместо `localhost`. Вы можете найти или добавить имя хоста в `/etc/hosts` в Linux и MacOSX и `C:\Windows\System32\drivers\etc` в Windows.

image::images/newlocalhost.png[Hosts file,style="lesson-image"]

Затем в вашем браузере используйте http://www.webgoat.local:8080/WebGoat в качестве адреса.

=== Настройте браузер на использование прокси

Чтобы вручную настроить прокси в браузере, следуйте одной из конфигураций ниже:

==== Конфигурация прокси Firefox

. Перейдите в меню «Настройки Firefox» (Mac, Linux) или «Параметры» (Windows).`
. Выберите «Дополнительно» слева
. Выберите «Сеть» на панели «Дополнительно»
. Нажмите «Настройки»
. Выберите «Ручная настройка прокси-сервера»
.. введите *127.0.0.1* в качестве прокси-сервера (или www.webgoat.local в зависимости от сделанного вами выбора выше)
.. введите *8090* в качестве порта, если WebGoat работает локально, и обновите ZAP до 8090 (в противном случае используйте *8080*)
.. установите флажок «Использовать этот прокси-сервер для всех протоколов»

image::images/firefox-proxy-config.png[Firefox Proxy Config,510,634,style="lesson-image"]

==== Конфигурация прокси-сервера Chrome

. Откройте настройки Chrome из меню
. В поле _Настройки поиска_ введите *proxy* и нажмите Enter/Return. Это должно открыть заголовок Сеть с кнопкой _Изменить настройки прокси_.
. Нажмите кнопку _Изменить настройки прокси_
. Выберите вкладку _прокси_
. Выберите Веб-прокси (HTTP)
. Введите 127.0.0.1 (или www.webgoat.local в зависимости от сделанного вами выбора) в первом поле под _Сервер веб-прокси_ и номер вашего порта (8090, если WebGoat работает локально, в противном случае 8080) во втором поле (справа)
. Вы также можете очистить текстовое поле _Обойти настройки прокси для этих хостов и доменов_ внизу, но это не обязательно

image::images/chrome-manual-proxy.png[Chrome Proxy Config,700,447,style="lesson-image"]

(Изображение конфигурации Mac выше)

image::images/chrome-manual-proxy-win.png[Chrome Proxy, 394,346,style="lesson-image"]

(Изображение конфигурации Win выше)
